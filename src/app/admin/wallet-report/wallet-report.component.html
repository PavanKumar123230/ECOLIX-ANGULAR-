<!-- FILTERS -->
<h4 class="fw-bold text-muted mt-2"> Income Type
</h4>
<div class="row g-3 mb-3 mt-2">
    <div class="col-md-4">
        <select class="form-select" [(ngModel)]="selectedPaytype" (change)="applyFilters()">
            <option value="">-- Select Pay Type --</option>
            <option value="join">Join</option>
            <option value="silver">Silver</option>
            <option value="gold">Gold</option>
            <option value="diamond">Diamond</option>
        </select>
    </div>
    <div class="col-md-4">
        <input type="date" class="form-control" [(ngModel)]="fromDate" (change)="applyFilters()">
    </div>

    <div class="col-md-4">
        <input type="date" class="form-control" [(ngModel)]="toDate" (change)="applyFilters()">
    </div>
</div>

<!-- TABLE -->
<div *ngIf="!loading && filteredUsers.length > 0" class="card table-container mt-3">

    <h3 class="table-title d-flex justify-content-between align-items-center">
        <span>
            <i class="fas fa-wallet"></i>
            Wallet Report <small class="text-muted">(Level Income)</small>
        </span>

        <span class="badge bg-success">
            Records: {{ filteredUsers.length }}
        </span>
    </h3>

    <div class="table-responsive table-scroll">
        <table class="table table-bordered table-striped align-middle text-center mb-0">
            <thead class="table-dark sticky-top">
                <tr>
                    <th>S.no</th>
                    <th>Date</th>
                    <th>User ID</th>
                    <th>Register ID</th>
                    <th>Pay Type</th>
                    <th>Amount</th>
                    <th>Level</th>

                </tr>
            </thead>

            <tbody>
                <!-- <tr *ngFor="let u of filteredUsers; index as i">
                    <td>{{ i + 1 }}</td>
                    <td>{{ u.cdate | date:'dd/MM/yyyy'}}</td>

                    <td>{{ u.userid || '-' }}</td>
                    <td>{{ u.forid || '-' }}</td>
                    <td><span class="badge bg-primary">{{ u.paytype }}</span></td>
                    <td class="fw-bold text-success">₹{{ u.amount || 0 }}</td>
                    <td><span class="badge bg-info">L{{ u.level }}</span></td>

                </tr> -->
                <tr *ngFor="let u of paginatedUsers; index as i">
                    <td>{{ (currentPage-1)*pageSize + i + 1 }}</td>
                    <td>{{ u.cdate | date:'dd/MM/yyyy'}}</td>
                    <td>{{ u.userid }}</td>
                    <td>{{ u.forid || '-' }}</td>

            
                    <td><span class="badge bg-primary">{{ u.paytype }}</span></td>
                    <td class="fw-bold text-success">₹{{ u.amount }}</td>
                    <td><span class="badge bg-info">L{{ u.level }}</span></td>

                  </tr>
                  
            </tbody>

            <!-- <tfoot class="table-light fw-bold">
                <tr>
                    <td colspan="5">Total</td>
                    <td  colspan="1" class="text-success">₹{{ totalAmount }}</td>
                </tr>
            </tfoot> -->
            <tfoot class="table-light fw-bold">
                <tr>
                  <td colspan="5">Page Total</td>
                  <td class="text-success">₹{{ pageTotalAmount }}</td>
                  <td></td>
                </tr>
              </tfoot>
              
        </table>
     
          
    </div>
</div>
<div class="d-flex justify-content-between align-items-center mt-3">
    <button class="btn btn-sm btn-primary" (click)="prevPage()" [disabled]="currentPage === 1">
      Prev
    </button>
  
    <span>Page {{ currentPage }} of {{ totalPages }}</span>
  
    <button class="btn btn-sm btn-primary" (click)="nextPage()" [disabled]="currentPage === totalPages">
      Next
    </button>
  </div>
<!-- NO DATA -->
<div *ngIf="!loading && filteredUsers.length === 0" class="alert alert-warning text-center mt-3">
    No wallet records found
</div>

<!-- LOADING -->
<div *ngIf="loading" class="text-center mt-3">
    <span class="spinner-border spinner-border-sm"></span>
    Loading wallet report...
</div>