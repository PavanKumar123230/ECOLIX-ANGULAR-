<div class="container my-5">
  <div class="card profile-card shadow-lg border-0 p-4 mx-auto">
    <form [formGroup]="profileForm" (ngSubmit)="onSave()">


<div class="text-center mb-4">

  <!-- Profile Image Block -->
  <div class="position-relative d-inline-block">

    <!-- If user uploaded image show preview -->
    <img
      *ngIf="previewImage; else defaultIcon"
      [src]="previewImage"
      class="rounded-circle shadow"
      width="120"
      height="120"
      style="object-fit: cover;"
    />

    <!-- Default Icon -->
    <ng-template #defaultIcon>
      <div
        class="profile-icon bg-primary text-white rounded-circle d-flex align-items-center justify-content-center"
        style="width: 120px; height: 120px;"
      >
        <i class="bi bi-person-fill fs-1"></i>
      </div>
    </ng-template>
    <!-- Pencil Edit Button -->
    <label
      class="position-absolute bottom-0 end-0 bg-primary text-white rounded-circle p-2 shadow"
      style="cursor: pointer;"
      title="Change Profile Photo"
    >
      <i class="bi bi-pencil-fill"></i>
      <input type="file" accept="image/*" hidden (change)="onImageSelect($event)" />
    </label>
  </div>
  
  <h3 class="mt-3 text-primary fw-bold">User Profile</h3>
  <p class="text-muted small">Manage and update your profile</p>
</div>
      <!-- Basic Details -->
      <h5 class="fw-bold text-primary mb-3">Basic Details</h5>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Name</label>
          <input class="form-control form-control-lg" formControlName="name" />
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Email</label>
          <input class="form-control form-control-lg" formControlName="email" />
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Phone</label>
          <input class="form-control form-control-lg" formControlName="phone" />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">State</label>
          <input class="form-control form-control-lg" formControlName="state" />
        </div>

        <div class="col-md-12 mb-3">
          <label class="form-label fw-semibold">Address</label>
          <textarea class="form-control" rows="2" formControlName="address"></textarea>
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Pincode</label>
          <input class="form-control form-control-lg" formControlName="pincode" />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Password</label>
          <div class="input-group">
            <input [type]="showPass ? 'text' : 'password'" class="form-control form-control-lg" formControlName="password" />
            <span class="input-group-text" style="cursor:pointer" (click)="togglePass()">
              <i class="bi" [ngClass]="showPass ? 'bi-eye-slash' : 'bi-eye'"></i>
            </span>
          </div>
        </div>
      </div>

      <hr />

      <!-- KYC -->
      <h5 class="text-warning fw-bold mb-3">KYC Details</h5>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Aadhaar Number</label>
          <input class="form-control form-control-lg" formControlName="aadharno" />
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">PAN Number</label>
          <input class="form-control form-control-lg" formControlName="panno" />
        </div>
      </div>

      <hr />

      <!-- Bank -->
      <h5 class="text-success fw-bold mb-3">Bank Details</h5>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Payee Name</label>
          <input class="form-control form-control-lg" formControlName="payeename" />
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Bank Name</label>
          <input class="form-control form-control-lg" formControlName="bankname" />
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Branch</label>
          <input class="form-control form-control-lg" formControlName="branch" />
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">IFSC Code</label>
          <input class="form-control form-control-lg" formControlName="ifsccode" />
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Account Number</label>
          <input class="form-control form-control-lg" formControlName="accountno" />
        </div>
      </div>

      <hr />

      <!-- Nominee -->
      <h5 class="text-info fw-bold mb-3">Nominee Details</h5>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Nominee Name</label>
          <input class="form-control form-control-lg" formControlName="nname" />
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Relation</label>
          <input class="form-control form-control-lg" formControlName="nrelation" />
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Date of Birth</label>
          <input
            type="date"
            class="form-control form-control-lg"
            formControlName="ndob"
          />
        </div>
      </div>
      <div class="text-center mt-4">
        <button class="btn btn-primary px-5 py-2" [disabled]="saving">
          {{ saving ? 'Saving...' : 'Save Changes' }}
        </button>
      </div>

    </form>
  </div>
</div>
